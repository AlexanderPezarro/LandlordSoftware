{"id":"LandlordSoftware-a5n","title":"Database Schema \u0026 Prisma Models","description":"Create complete Prisma schema with all models: Properties, Tenants, Leases, Transactions, Documents, Events","status":"tombstone","priority":0,"issue_type":"epic","created_at":"2026-01-08T17:33:19.954476752Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-a5n","depends_on_id":"LandlordSoftware-xy9","type":"blocks","created_at":"2026-01-08T19:14:05.327030552Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"LandlordSoftware-a5n.1","title":"Create Properties Model","description":"Add PropertyStatus and PropertyType enums. Create Property model with UK address fields (street, city, county, postcode). Run migration.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:33:59.282958367Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-a5n.1","depends_on_id":"LandlordSoftware-a5n","type":"parent-child","created_at":"2026-01-08T17:33:59.301553674Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-a5n.2","title":"Create Tenants and Leases Models","description":"Add TenantStatus and LeaseStatus enums. Create Tenant model with contact info. Create Lease model linking properties and tenants. Run migration.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:34:00.427977421Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-a5n.2","depends_on_id":"LandlordSoftware-a5n","type":"parent-child","created_at":"2026-01-08T17:34:00.44227298Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-a5n.3","title":"Create Transactions and Documents Models","description":"Add TransactionType and EntityType enums. Create Transaction model for income/expenses. Create Document model for file attachments. Run migration.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:34:01.598877363Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-a5n.3","depends_on_id":"LandlordSoftware-a5n","type":"parent-child","created_at":"2026-01-08T17:34:01.611473503Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-a5n.4","title":"Create Events Model","description":"Add EventType enum. Create Event model for calendar scheduling linked to properties. Track completion status. Run migration and generate Prisma Client.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:34:02.705189686Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-a5n.4","depends_on_id":"LandlordSoftware-a5n","type":"parent-child","created_at":"2026-01-08T17:34:02.72083296Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-hly","title":"Properties API \u0026 Services","description":"Create backend API routes and services for property CRUD operations","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-08T17:33:22.218178603Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-hly","depends_on_id":"LandlordSoftware-sx2","type":"blocks","created_at":"2026-01-08T19:14:07.326463119Z","created_by":"stuff"},{"issue_id":"LandlordSoftware-hly","depends_on_id":"LandlordSoftware-a5n","type":"blocks","created_at":"2026-01-08T19:14:08.03305555Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"LandlordSoftware-hly.1","title":"Create Properties API Routes","description":"Create PropertyService for database operations. Implement CRUD endpoints (GET, POST, PUT, DELETE). Include related data in detail view. Protect with auth middleware.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-08T17:34:20.177614079Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-hly.1","depends_on_id":"LandlordSoftware-hly","type":"parent-child","created_at":"2026-01-08T17:34:20.188979105Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-hly.2","title":"Create Properties Frontend Service","description":"Create base axios API client with auth interceptor. Add property types. Implement propertyService for API calls with auto-redirect on 401.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-08T17:34:21.225555437Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-hly.2","depends_on_id":"LandlordSoftware-hly","type":"parent-child","created_at":"2026-01-08T17:34:21.237606271Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-pbk","title":"Properties Frontend UI","description":"Create properties list page with Material-UI components and property management","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-08T17:33:24.528002273Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-pbk","depends_on_id":"LandlordSoftware-zcm","type":"blocks","created_at":"2026-01-08T19:14:10.790653265Z","created_by":"stuff"},{"issue_id":"LandlordSoftware-pbk","depends_on_id":"LandlordSoftware-hly","type":"blocks","created_at":"2026-01-08T19:14:11.520639102Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"LandlordSoftware-pbk.1","title":"Create Properties List Page","description":"Create Layout component with navigation drawer. Build PropertyCard component. Implement Properties page with list view. Add edit and delete actions. Integrate with propertyService.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-08T17:34:35.43048433Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-pbk.1","depends_on_id":"LandlordSoftware-pbk","type":"parent-child","created_at":"2026-01-08T17:34:35.448771834Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-sx2","title":"Authentication System","description":"Implement backend authentication with sessions, bcrypt, and protected routes","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-08T17:33:21.091742638Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-sx2","depends_on_id":"LandlordSoftware-a5n","type":"blocks","created_at":"2026-01-08T19:14:06.33627924Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"LandlordSoftware-sx2.1","title":"Create Authentication Middleware","description":"Create auth middleware for protected routes. Setup express-session with SQLite store. Configure helmet and rate limiting. Add session types.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-08T17:34:10.643260884Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-sx2.1","depends_on_id":"LandlordSoftware-sx2","type":"parent-child","created_at":"2026-01-08T17:34:10.65548622Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-sx2.2","title":"Create Auth Routes","description":"Create AuthService with bcrypt password hashing. Implement login, logout, me, and setup endpoints. Register routes in server.ts.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-08T17:34:11.744382844Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-sx2.2","depends_on_id":"LandlordSoftware-sx2","type":"parent-child","created_at":"2026-01-08T17:34:11.759776615Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-xy9","title":"Project Setup \u0026 Configuration","description":"Initialize Node.js monorepo with TypeScript, setup backend with Express/Prisma, and frontend with Vite/React/Material-UI","status":"tombstone","priority":0,"issue_type":"epic","created_at":"2026-01-08T17:33:18.803182707Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"All children completed","deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"LandlordSoftware-xy9.1","title":"Initialize Node.js Project Structure","description":"Create package.json, tsconfig files, and directory structure for server and client. Install TypeScript and base dependencies.","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:33:42.853789166Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-xy9.1","depends_on_id":"LandlordSoftware-xy9","type":"parent-child","created_at":"2026-01-08T17:33:42.87206947Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-xy9.2","title":"Setup Backend Dependencies","description":"Install Express, Prisma, session management, validation (Zod), security middleware (helmet, rate-limit), and create basic server.ts","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:33:44.085853303Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-xy9.2","depends_on_id":"LandlordSoftware-xy9","type":"parent-child","created_at":"2026-01-08T17:33:44.104784214Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-xy9.3","title":"Setup Prisma Database","description":"Initialize Prisma with SQLite, create initial User model, configure .env, and run first migration","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:33:45.318676748Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-xy9.3","depends_on_id":"LandlordSoftware-xy9","type":"parent-child","created_at":"2026-01-08T17:33:45.329800272Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-xy9.4","title":"Setup Frontend with Vite and React","description":"Install Vite, React, Material-UI, React Router. Create index.html, main.tsx, App.tsx, and configure Vite with API proxy","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-08T17:33:46.428199818Z","created_by":"stuff","updated_at":"2026-01-13T10:42:12.826939267Z","close_reason":"Closed","dependencies":[{"issue_id":"LandlordSoftware-xy9.4","depends_on_id":"LandlordSoftware-xy9","type":"parent-child","created_at":"2026-01-08T17:33:46.441578667Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:42:12.826939267Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"LandlordSoftware-zcm","title":"Authentication Frontend","description":"Implement login page, auth context, and protected routes in React","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-08T17:33:23.389490772Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-zcm","depends_on_id":"LandlordSoftware-sx2","type":"blocks","created_at":"2026-01-08T19:14:09.036191182Z","created_by":"stuff"},{"issue_id":"LandlordSoftware-zcm","depends_on_id":"LandlordSoftware-xy9","type":"blocks","created_at":"2026-01-08T19:14:09.767142334Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"LandlordSoftware-zcm.1","title":"Create Login Page and Auth Context","description":"Create AuthContext for global auth state. Build Login page with Material-UI form. Implement authService. Add protected routes with React Router. Setup PrivateRoute component.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-08T17:34:29.136600639Z","created_by":"stuff","updated_at":"2026-01-13T10:40:29.851152943Z","dependencies":[{"issue_id":"LandlordSoftware-zcm.1","depends_on_id":"LandlordSoftware-zcm","type":"parent-child","created_at":"2026-01-08T17:34:29.148716275Z","created_by":"stuff"}],"deleted_at":"2026-01-13T10:40:29.851152943Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"Task-0in","title":"Finances/Transactions page with transaction list, comprehensive filters (property/type/category/date range), add/edit transaction forms, file upload integration, and financial summary cards showing income vs expenses","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:19.945416416Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:19.945416416Z","dependencies":[{"issue_id":"Task-0in","depends_on_id":"Task-1ks","type":"blocks","created_at":"2026-01-13T11:16:35.476590818Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-0in","depends_on_id":"Task-85a","type":"blocks","created_at":"2026-01-13T11:16:36.014528932Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-0in","depends_on_id":"Task-4q5","type":"blocks","created_at":"2026-01-13T11:16:36.531509762Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-0in","depends_on_id":"Task-ob7","type":"blocks","created_at":"2026-01-13T11:16:37.071228067Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-0m9","title":"Shared Zod validation schemas for all entities","description":"Create comprehensive Zod validation schemas in shared/validation directory for:\n\nENTITIES:\n- Properties (name, address with UK postcode, property_type, purchase_date, purchase_price, status, notes)\n- Tenants (names, email, phone, emergency contacts, status)\n- Leases (property_id, tenant_id, dates, monthly_rent, security_deposit, status)\n- Transactions (property_id, lease_id, type, category, amount, date, description)\n- Events (property_id, event_type, title, description, scheduled_date, completed)\n\nVALIDATIONS:\n- UK postcode: AA9A 9AA, A9A 9AA, A9 9AA, A99 9AA, AA9 9AA, AA99 9AA formats\n- Email: standard email format\n- Phone: UK phone formats (mobile/landline)\n- Date ranges: start_date \u003c= end_date for leases\n- Positive decimals: financial amounts (rent, deposit, transaction amount)\n- Enums: property_type, status fields, transaction types, event types\n- File validation: MIME types (jpg, png, pdf), 10MB size limit\n\nUSAGE:\n- Export schemas for backend API validation (Express middleware)\n- Export schemas for frontend React Hook Form with Zod resolver\n- Shared between client and server for consistent validation","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:57.68635739Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T13:01:36.587101664Z","closed_at":"2026-01-13T13:01:36.587101664Z","close_reason":"Zod validation schemas complete for all entities. All format validations, enums, and business logic implemented correctly. Includes tests and documentation. Code quality: 8.5/10 - Approved. Suggested future improvements: refactor duplicate refinement logic, add Update schema tests.","labels":["task"],"dependencies":[{"issue_id":"Task-0m9","depends_on_id":"Task-tmr","type":"blocks","created_at":"2026-01-13T11:15:09.95192613Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-0ur","title":"Events/Calendar CRUD API with filtering, completion status tracking, and event type categorization","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:47:38.748733504Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T14:34:42.78993167Z","closed_at":"2026-01-13T14:34:42.78993167Z","close_reason":"Closed","dependencies":[{"issue_id":"Task-0ur","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:53.398794063Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-0ur","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:15:53.925002036Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-0ur","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:15:54.428366111Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-0ur","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:15:54.934722829Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-1ks","title":"Frontend API client service using Axios with interceptors and typed methods for all endpoints","description":"Create a comprehensive Axios-based API client service for the frontend with the following features:\n\nDEPENDENCIES INSTALLATION:\nRun in client/ directory first:\nnpm install axios zod\n\nCORE SETUP:\n- Configure Axios instance with base URL (/api), timeout settings (10000ms)\n- Request/response interceptors for authentication (include credentials, handle session)\n- Error handling interceptor (handle 401, 403, 404, 500 errors with standardized error format)\n- Request/response logging in development mode (check import.meta.env.DEV)\n- Retry logic for failed requests (retry once on 5xx errors)\n- Export singleton API client instance\n\nTYPESCRIPT INTERFACES:\n- Complete TypeScript interfaces for all request payloads\n- Complete TypeScript interfaces for all API responses\n- Error response types matching backend format: { success: false, error: string | { code: string, message: string, details?: any } }\n- Query parameter types for filtering\n- Import Zod schemas from shared/validation for runtime validation if needed\n\nAPI MODULES (typed methods):\n\nAUTH:\n- login(email, password) -\u003e User session\n- logout() -\u003e void\n- getMe() -\u003e Current user\n\nPROPERTIES:\n- getProperties(filters?: {status?, propertyType?, search?}) -\u003e Property[]\n- getProperty(id) -\u003e Property with details\n- createProperty(data) -\u003e Property\n- updateProperty(id, data) -\u003e Property\n- deleteProperty(id) -\u003e void\n\nTENANTS:\n- getTenants(filters?: {status?: 'Prospective' | 'Active' | 'Former', search?}) -\u003e Tenant[]\n- getTenant(id) -\u003e Tenant with lease history\n- getTenantLeaseHistory(id, filters?: {fromDate?, toDate?}) -\u003e Lease[] with property details\n- createTenant(data) -\u003e Tenant\n- updateTenant(id, data) -\u003e Tenant\n- deleteTenant(id) -\u003e void\n\nLEASES:\n- getLeases(filters?: {property_id?, tenant_id?, status?}) -\u003e Lease[]\n- getLease(id) -\u003e Lease details with property and tenant\n- createLease(data) -\u003e Lease\n- updateLease(id, data) -\u003e Lease\n- deleteLease(id) -\u003e void\n\nTRANSACTIONS:\n- getTransactions(filters?: {property_id?, type?, category?, start_date?, end_date?}) -\u003e Transaction[]\n- getTransaction(id) -\u003e Transaction with documents\n- createTransaction(data) -\u003e Transaction\n- updateTransaction(id, data) -\u003e Transaction\n- deleteTransaction(id) -\u003e void\n- getTransactionSummary(filters?: {property_id?, start_date?, end_date?}) -\u003e Financial summary\n\nEVENTS:\n- getEvents(filters?: {property_id?, completed?, start_date?, end_date?}) -\u003e Event[]\n- getEvent(id) -\u003e Event details\n- createEvent(data) -\u003e Event\n- updateEvent(id, data) -\u003e Event\n- deleteEvent(id) -\u003e void\n- markEventComplete(id) -\u003e Event\n\nDOCUMENTS:\n- uploadDocument(file: File, entity_type, entity_id) -\u003e Document (multipart/form-data)\n- downloadDocument(id) -\u003e Blob\n- deleteDocument(id) -\u003e void\n\nIMPLEMENTATION DETAILS:\n- Create client/src/services/api.ts for main API client configuration\n- Create client/src/services/api/ directory for module-specific services:\n  * auth.service.ts\n  * properties.service.ts\n  * tenants.service.ts\n  * leases.service.ts\n  * transactions.service.ts\n  * events.service.ts\n  * documents.service.ts\n- Create client/src/types/api.types.ts for API response/request types\n- Proper error handling with typed errors (create ApiError class)\n- Success/error response wrapping matching backend format: { success: boolean, data?: any, error?: string }\n- Development vs production configuration (use import.meta.env)\n- All methods should handle loading states and errors gracefully\n- Use axios interceptors to automatically include credentials: 'include'\n- Handle 401 errors by redirecting to login (or emit event for auth context)\n\nERROR HANDLING:\n- Create custom ApiError class with status, message, and details\n- Transform axios errors to ApiError instances\n- Provide user-friendly error messages\n- Log errors in development mode\n\nTESTING:\n- Test successful API calls\n- Test error handling (network errors, 4xx, 5xx)\n- Test authentication interceptor\n- Test retry logic\n\nDEPENDS ON\n  → ✓ Task-0m9: Shared Zod validation schemas for all entities ● P1\n  → ✓ Task-atm: React frontend foundation with React Router setup, Material-UI theme configuration, authentication context, and main layout component with navigation ● P1\n\nBLOCKS\n  ← ○ Task-0in: Finances/Transactions page with transaction list, comprehensive filters (property/type/category/date range), add/edit transaction forms, file upload integration, and financial summary cards showing income vs expenses ● P2\n  ← ○ Task-6lt: Implement Tenants Page with Tabs and CRUD Operations ● P2\n  ← ○ Task-7xg: Create Dashboard page with Material-UI overview cards, events widget, transactions list, and quick actions ● P2\n  ← ○ Task-mdy: Calendar/Events Page with react-big-calendar ● P2\n  ← ○ Task-pmy: Properties List/Detail Page with CRUD Operations ● P2\n  ← ○ Task-vpz: Global error handling with React error boundary, toast notifications using Material-UI Snackbar, loading states, and standardized error response handling in API client ● P2","status":"open","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:49:13.70922805Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T17:50:09.826827588Z","dependencies":[{"issue_id":"Task-1ks","depends_on_id":"Task-atm","type":"blocks","created_at":"2026-01-13T11:16:11.103538757Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-1ks","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:16:11.655494957Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-1t8","title":"Production Build Configuration","description":"Configure production build setup including building both client and server, serving static files from Express, environment variable configuration, and build scripts","status":"open","priority":3,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:20.327371119Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:20.327371119Z","dependencies":[{"issue_id":"Task-1t8","depends_on_id":"Task-7xg","type":"blocks","created_at":"2026-01-13T11:16:54.460193081Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-1t8","depends_on_id":"Task-pmy","type":"blocks","created_at":"2026-01-13T11:16:54.945149061Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-1t8","depends_on_id":"Task-6lt","type":"blocks","created_at":"2026-01-13T11:16:55.467138594Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-1t8","depends_on_id":"Task-0in","type":"blocks","created_at":"2026-01-13T11:16:56.004026939Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-1t8","depends_on_id":"Task-mdy","type":"blocks","created_at":"2026-01-13T11:16:56.530883666Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-1t8","depends_on_id":"Task-bhk","type":"blocks","created_at":"2026-01-13T11:16:57.056690214Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-221","title":"Prisma schema \u0026 database setup","description":"## Overview\nSet up Prisma ORM with SQLite database, define all schemas (Properties, Tenants, Leases, Transactions, Events, Documents, Users), and run initial migration.\n\n## Files\n- Create: `prisma/schema.prisma`\n- Create: `server/src/db/client.ts`\n\n## Implementation Steps\n\n### Step 1: Create Prisma schema\n\n`prisma/schema.prisma`:\n```prisma\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"sqlite\"\n  url      = env(\"DATABASE_URL\")\n}\n\nmodel User {\n  id        String   @id @default(uuid())\n  email     String   @unique\n  password  String\n  createdAt DateTime @default(now()) @map(\"created_at\")\n  updatedAt DateTime @updatedAt @map(\"updated_at\")\n\n  @@map(\"users\")\n}\n\nmodel Property {\n  id            String   @id @default(uuid())\n  name          String\n  street        String\n  city          String\n  county        String\n  postcode      String\n  propertyType  String   @map(\"property_type\")\n  purchaseDate  DateTime? @map(\"purchase_date\")\n  purchasePrice Float?    @map(\"purchase_price\")\n  status        String\n  notes         String?\n  createdAt     DateTime @default(now()) @map(\"created_at\")\n  updatedAt     DateTime @updatedAt @map(\"updated_at\")\n\n  leases       Lease[]\n  transactions Transaction[]\n  events       Event[]\n  documents    Document[]\n\n  @@map(\"properties\")\n}\n\nmodel Tenant {\n  id                    String   @id @default(uuid())\n  firstName             String   @map(\"first_name\")\n  lastName              String   @map(\"last_name\")\n  email                 String\n  phone                 String\n  emergencyContactName  String?  @map(\"emergency_contact_name\")\n  emergencyContactPhone String?  @map(\"emergency_contact_phone\")\n  status                String\n  notes                 String?\n  createdAt             DateTime @default(now()) @map(\"created_at\")\n  updatedAt             DateTime @updatedAt @map(\"updated_at\")\n\n  leases    Lease[]\n  documents Document[]\n\n  @@map(\"tenants\")\n}\n\nmodel Lease {\n  id                      String    @id @default(uuid())\n  propertyId              String    @map(\"property_id\")\n  tenantId                String    @map(\"tenant_id\")\n  startDate               DateTime  @map(\"start_date\")\n  endDate                 DateTime? @map(\"end_date\")\n  monthlyRent             Float     @map(\"monthly_rent\")\n  securityDepositAmount   Float     @map(\"security_deposit_amount\")\n  securityDepositPaidDate DateTime? @map(\"security_deposit_paid_date\")\n  status                  String\n  createdAt               DateTime  @default(now()) @map(\"created_at\")\n  updatedAt               DateTime  @updatedAt @map(\"updated_at\")\n\n  property     Property      @relation(fields: [propertyId], references: [id], onDelete: Cascade)\n  tenant       Tenant        @relation(fields: [tenantId], references: [id], onDelete: Cascade)\n  transactions Transaction[]\n\n  @@map(\"leases\")\n}\n\nmodel Transaction {\n  id              String   @id @default(uuid())\n  propertyId      String   @map(\"property_id\")\n  leaseId         String?  @map(\"lease_id\")\n  type            String\n  category        String\n  amount          Float\n  transactionDate DateTime @map(\"transaction_date\")\n  description     String\n  createdAt       DateTime @default(now()) @map(\"created_at\")\n  updatedAt       DateTime @updatedAt @map(\"updated_at\")\n\n  property  Property   @relation(fields: [propertyId], references: [id], onDelete: Cascade)\n  lease     Lease?     @relation(fields: [leaseId], references: [id], onDelete: SetNull)\n  documents Document[]\n\n  @@map(\"transactions\")\n}\n\nmodel Event {\n  id            String    @id @default(uuid())\n  propertyId    String    @map(\"property_id\")\n  eventType     String    @map(\"event_type\")\n  title         String\n  description   String?\n  scheduledDate DateTime  @map(\"scheduled_date\")\n  completed     Boolean   @default(false)\n  completedDate DateTime? @map(\"completed_date\")\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  property Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)\n\n  @@map(\"events\")\n}\n\nmodel Document {\n  id         String   @id @default(uuid())\n  entityType String   @map(\"entity_type\")\n  entityId   String   @map(\"entity_id\")\n  fileName   String   @map(\"file_name\")\n  filePath   String   @map(\"file_path\")\n  fileType   String   @map(\"file_type\")\n  fileSize   Int      @map(\"file_size\")\n  uploadedAt DateTime @default(now()) @map(\"uploaded_at\")\n\n  property    Property?    @relation(fields: [entityId], references: [id], onDelete: Cascade)\n  tenant      Tenant?      @relation(fields: [entityId], references: [id], onDelete: Cascade)\n  transaction Transaction? @relation(fields: [entityId], references: [id], onDelete: Cascade)\n\n  @@map(\"documents\")\n}\n```\n\n### Step 2: Create database client\n\n`server/src/db/client.ts`:\n```typescript\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient({\n  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n});\n\nexport default prisma;\n```\n\n### Step 3: Generate Prisma client\n\n```bash\nnpx prisma generate\n```\n\nExpected: Prisma client generated successfully\n\n### Step 4: Run initial migration\n\n```bash\nmkdir -p data\nnpx prisma migrate dev --name initial_schema\n```\n\nExpected: Migration created and applied, database file created at `data/landlord.db`\n\n### Step 5: Verify schema\n\n```bash\nnpx prisma studio\n```\n\nExpected: Prisma Studio opens at http://localhost:5555 showing all tables\n\n### Step 6: Test database connection\n\nCreate `server/src/test-db.ts`:\n```typescript\nimport prisma from './db/client';\n\nasync function testConnection() {\n  try {\n    await prisma.$connect();\n    console.log('✅ Database connected successfully');\n    \n    const userCount = await prisma.user.count();\n    console.log(`Users in database: ${userCount}`);\n    \n    await prisma.$disconnect();\n  } catch (error) {\n    console.error('❌ Database connection failed:', error);\n    process.exit(1);\n  }\n}\n\ntestConnection();\n```\n\nRun:\n```bash\ntsx server/src/test-db.ts\n```\n\nExpected: \"✅ Database connected successfully\" and \"Users in database: 0\"\n\n### Step 7: Clean up test file\n\n```bash\nrm server/src/test-db.ts\n```\n\n### Step 8: Commit\n\n```bash\ngit add prisma/ server/src/db/ data/.gitkeep\ngit commit -m \"feat: add Prisma schema and database setup\"\n```\n\n## Verification\n\n- [ ] `data/landlord.db` file exists\n- [ ] `npx prisma studio` opens without errors\n- [ ] All 7 tables visible in Prisma Studio: users, properties, tenants, leases, transactions, events, documents\n- [ ] Prisma client imports successfully in TypeScript\n- [ ] Foreign key relationships are correct\n\n## Notes\n\n- SQLite is used for simplicity and portability\n- All IDs use UUID for better scalability\n- Cascade deletes are configured for data integrity\n- Snake_case for database columns, camelCase for TypeScript\n- Dates are stored as DateTime in SQLite (ISO 8601 strings)","status":"closed","priority":0,"issue_type":"feature","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:47:34.611465194Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T12:46:10.218771116Z","closed_at":"2026-01-13T12:46:10.218771116Z","close_reason":"Prisma schema and database setup complete. All 7 models created with proper relationships. Migration applied successfully. Code quality: 8.5/10 - Approved with recommendations for future enhancements (add enums for type safety, verify Document index).","dependencies":[{"issue_id":"Task-221","depends_on_id":"Task-tmr","type":"blocks","created_at":"2026-01-13T11:15:09.475559536Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-4fz","title":"Storage service interface with local filesystem implementation","description":"## Overview\nCreate a storage service interface with a local filesystem implementation for handling document uploads. This includes defining the interface contract, implementing local storage, adding proper error handling, and comprehensive testing.\n\n## Files to Create\n1. `server/src/services/storage/IStorageService.ts` - Storage interface\n2. `server/src/services/storage/LocalStorageService.ts` - Local implementation\n3. `server/src/services/storage/index.ts` - Export barrel file\n4. `server/src/config/storage.ts` - Storage configuration\n5. `server/src/services/storage/errors.ts` - Error classes\n6. `server/src/__tests__/services/storage/LocalStorageService.test.ts` - Test file\n\n## TDD Implementation Steps\n\n### Step 1: Write failing tests with test file structure\n\n### Step 2: Create storage configuration with max file size and allowed MIME types\n\n### Step 3: Create storage interface and error types (StorageError, FileSizeError, InvalidFileTypeError, PathTraversalError)\n\n### Step 4: Implement LocalStorageService with validation\n\n### Step 5: Run tests (should pass)\n\n### Step 6: Add static file serving to Express\n\n## Verification Checklist\n- [ ] All unit tests pass\n- [ ] File size validation works\n- [ ] MIME type validation works\n- [ ] Path traversal protection works\n- [ ] Unique filenames generated\n- [ ] Files organized by year/month\n- [ ] Test coverage \u003e80%\n\n## Security Features\n- File size limits prevent DoS\n- MIME type validation prevents malicious uploads\n- Path traversal validation prevents directory escape\n- Unique filenames prevent collisions","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T11:14:24.860373558Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T13:13:33.875028852Z","closed_at":"2026-01-13T13:13:33.875028852Z","close_reason":"Storage service implementation complete with TDD approach. 98.11% test coverage, all security features implemented. Code quality: 8.5/10 - Approved. Production-ready. Suggested future improvements: refine error handling in ensureDirectory, add constructor validation, fix hardcoded path in server.ts.","dependencies":[{"issue_id":"Task-4fz","depends_on_id":"Task-tmr","type":"blocks","created_at":"2026-01-13T11:15:10.460805016Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-4l5","title":"Properties CRUD API with all endpoints, Zod validation, error handling, and tests","description":"Implement comprehensive Properties CRUD API with the following requirements:\n\n## Endpoints\n- GET /api/properties - List all properties with filtering by status (active/inactive), type (single-family/multi-family/apartment/commercial), and optional search\n- GET /api/properties/:id - Get single property by ID with full details\n- POST /api/properties - Create new property with validation\n- PUT /api/properties/:id - Update existing property\n- DELETE /api/properties/:id - Soft delete property (mark as inactive)\n\n## Data Model\nProperty fields should include:\n- id (UUID/Auto-generated)\n- address (street, city, state, zip)\n- type (enum: single-family, multi-family, apartment, commercial)\n- status (enum: active, inactive, under-renovation)\n- purchase_date\n- purchase_price\n- current_value\n- bedrooms\n- bathrooms\n- square_feet\n- description\n- notes\n- created_at\n- updated_at\n\n## Validation\n- Implement Zod schemas for:\n  - Property creation (all required fields)\n  - Property update (partial fields allowed)\n  - Query parameters for filtering\n- Validate address format and required components\n- Validate numeric fields (price \u003e 0, bedrooms \u003e= 0, etc.)\n- Validate enums for type and status\n\n## Error Handling\n- Return appropriate HTTP status codes (200, 201, 400, 404, 500)\n- Consistent error response format with message and validation details\n- Handle database errors gracefully\n- Validate UUID format for ID parameters\n\n## Testing Steps\n1. Test GET /api/properties returns empty array initially\n2. Test POST /api/properties creates property with valid data\n3. Test POST validation errors for invalid/missing fields\n4. Test GET /api/properties/:id returns created property\n5. Test GET /api/properties/:id returns 404 for non-existent ID\n6. Test PUT /api/properties/:id updates property fields\n7. Test DELETE /api/properties/:id soft deletes property\n8. Test GET /api/properties with filters (status, type)\n9. Test edge cases (duplicate addresses, invalid enums, SQL injection attempts)\n\n## Implementation Notes\n- Use Express.js router pattern\n- Follow RESTful conventions\n- Include proper TypeScript types\n- Use async/await with try-catch blocks\n- Log errors appropriately\n- Return consistent JSON response structure","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:00.976725875Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T14:11:15.522889141Z","closed_at":"2026-01-13T14:11:15.522889141Z","close_reason":"Properties CRUD API implemented with comprehensive Zod validation, authentication, 44 passing tests covering all endpoints, filtering, search, and edge cases. Spec compliant and code quality approved.","dependencies":[{"issue_id":"Task-4l5","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:45.424280233Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-4l5","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:15:45.90139583Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-4l5","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:15:46.399482916Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-4q5","title":"Implement Transactions CRUD API with filtering, financial summary, and validation","description":"Create REST API endpoints for transaction management:\n- CRUD operations (Create, Read, Update, Delete) for transactions\n- Filtering capabilities: by property ID, transaction type, category, and date range\n- Financial summary endpoint: aggregated transaction data and reporting\n- Input validation: ensure data integrity for all transaction operations\n- Proper error handling and response formatting\n- Integration with existing database schema for transactions table","status":"open","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:47:40.499254079Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:47:40.499254079Z","dependencies":[{"issue_id":"Task-4q5","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:50.871294103Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-4q5","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:15:51.366517563Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-4q5","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:15:51.851352104Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-4q5","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:15:52.361049777Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-4q5","depends_on_id":"Task-srp","type":"blocks","created_at":"2026-01-13T11:15:52.853894864Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-6fr","title":"Create database seeding script with sample properties, tenants, leases, transactions, and events for testing and demonstration. Include script to reset/seed database with realistic test data.","status":"open","priority":3,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:45.250585324Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:45.250585324Z","dependencies":[{"issue_id":"Task-6fr","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:16:51.351200271Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6fr","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:16:51.86450921Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6fr","depends_on_id":"Task-d3h","type":"blocks","created_at":"2026-01-13T11:16:52.400706436Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6fr","depends_on_id":"Task-srp","type":"blocks","created_at":"2026-01-13T11:16:52.92334536Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6fr","depends_on_id":"Task-4q5","type":"blocks","created_at":"2026-01-13T11:16:53.436408314Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6fr","depends_on_id":"Task-0ur","type":"blocks","created_at":"2026-01-13T11:16:53.92516449Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-6lt","title":"Implement Tenants Page with Tabs and CRUD Operations","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:01.287491141Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:01.287491141Z","dependencies":[{"issue_id":"Task-6lt","depends_on_id":"Task-1ks","type":"blocks","created_at":"2026-01-13T11:16:32.72475405Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6lt","depends_on_id":"Task-85a","type":"blocks","created_at":"2026-01-13T11:16:33.228188664Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6lt","depends_on_id":"Task-d3h","type":"blocks","created_at":"2026-01-13T11:16:33.770603139Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6lt","depends_on_id":"Task-srp","type":"blocks","created_at":"2026-01-13T11:16:34.320996749Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-6lt","depends_on_id":"Task-ob7","type":"blocks","created_at":"2026-01-13T11:16:34.935501874Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-7xg","title":"Create Dashboard page with Material-UI overview cards, events widget, transactions list, and quick actions","description":"Build a comprehensive Dashboard page with the following components:\n- Overview cards displaying properties count, income, and expenses metrics\n- Upcoming events widget for important dates and reminders\n- Recent transactions list with pagination support\n- Quick action buttons for common operations\n- Responsive Material-UI Grid layout\n- Professional Material Design styling","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:08.897153785Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:08.897153785Z","dependencies":[{"issue_id":"Task-7xg","depends_on_id":"Task-1ks","type":"blocks","created_at":"2026-01-13T11:16:27.273540038Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-7xg","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:16:27.808626236Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-7xg","depends_on_id":"Task-4q5","type":"blocks","created_at":"2026-01-13T11:16:28.336364612Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-7xg","depends_on_id":"Task-0ur","type":"blocks","created_at":"2026-01-13T11:16:28.857810553Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-85a","title":"Implement shared/reusable React components including PropertyCard, TenantCard, TransactionRow, EventBadge, FileUpload, ConfirmDialog, StatsCard, DateRangePicker, and PropertySelector","description":"Create shared/reusable React components in client/src/components/shared/ directory. All components should use Material-UI, TypeScript, and follow established patterns.\n\nDEPENDENCIES INSTALLATION:\nRun in client/ directory first:\nnpm install @mui/x-date-pickers date-fns\n\nCOMPONENT SPECIFICATIONS:\n\n1. PropertyCard (client/src/components/shared/PropertyCard.tsx)\n   - Display property summary for list views\n   - Props: property (Property type), onClick (optional)\n   - UI: Card with property name, address, status badge, property type\n   - Status badges with colors: Vacant (orange), On Market (blue), Rented (green), Maintenance (yellow)\n   - Fetch and display monthly rent from active lease for this property\n     * Query: prisma.lease.findFirst({ where: { propertyId, status: 'Active' }, select: { monthlyRent: true } })\n     * Use API client: getLeases({ property_id: propertyId, status: 'Active' })\n     * Show \"£X,XXX/month\" if active lease exists\n     * Show \"No active lease\" if vacant\n   - Clickable card (cursor pointer, hover effect)\n   - Responsive: full width on mobile, grid on desktop\n   - Loading state while fetching lease info\n\n2. TenantCard (client/src/components/shared/TenantCard.tsx)\n   - Display tenant summary for list views\n   - Props: tenant (Tenant type), onClick (optional)\n   - UI: Card with name, contact info (email/phone), status badge\n   - Status badges: Prospective (gray), Active (green), Former (red)\n   - For Active tenants: fetch and display current property name\n     * Query: prisma.lease.findFirst({ where: { tenantId, status: 'Active' }, include: { property: true } })\n     * Use API client: getLeases({ tenant_id: tenantId, status: 'Active' })\n     * Show property name below contact info: \"Current: [Property Name]\"\n     * Handle case where Active tenant has no active lease (data inconsistency)\n   - Display emergency contact indicator (icon if emergencyContactName exists)\n   - Clickable card with hover effect\n   - Loading state while fetching lease/property info\n\n3. TransactionRow (client/src/components/shared/TransactionRow.tsx)\n   - Table row component for transaction lists\n   - Props: transaction (Transaction type), onEdit, onDelete (optional)\n   - Columns: Date, Property, Type (Income/Expense), Category, Amount, Actions\n   - Amount color: green for income, red for expenses\n   - Format amount with currency (£) using Intl.NumberFormat('en-GB', { style: 'currency', currency: 'GBP' })\n   - Format date using date-fns format(date, 'MMM dd, yyyy') (e.g., \"Jan 15, 2026\")\n   - Action buttons: Edit (IconButton with EditIcon), Delete (IconButton with DeleteIcon)\n   - Responsive: stack on mobile, table row on desktop\n\n4. EventBadge (client/src/components/shared/EventBadge.tsx)\n   - Display event with color-coding for calendar\n   - Props: event (Event type), onClick (optional)\n   - Colors by type: Repair (orange), Renovation (blue), Rent Change (green), Tenant Change (purple), Inspection (yellow), Other (gray)\n   - Show checkmark icon if completed\n   - Display event title (truncate if long)\n   - Small chip/badge styling\n   - Tooltip with full details on hover (use Material-UI Tooltip)\n   - Format date in tooltip using date-fns\n\n5. FileUpload (client/src/components/shared/FileUpload.tsx)\n   - File upload component with drag-and-drop\n   - Props: onFileSelect (callback with File), accept (file types: string), maxSize (default 10MB = 10 * 1024 * 1024 bytes)\n   - UI: Dropzone with \"Click to upload or drag and drop\" text\n   - Show file preview after selection (name, size formatted with formatBytes helper, type/icon)\n   - Display error for invalid file type or size exceeding maxSize\n   - Allowed types: jpg, png, pdf (accept=\"image/jpeg,image/png,application/pdf\")\n   - Clear/remove file button (IconButton with CloseIcon)\n   - Progress indicator during upload (optional for now, can use LinearProgress)\n   - Material-UI Box with dashed border and CloudUploadIcon\n\n6. ConfirmDialog (client/src/components/shared/ConfirmDialog.tsx)\n   - Reusable confirmation dialog for delete actions\n   - Props: open (boolean), title, message, onConfirm, onCancel, loading (optional, default false)\n   - UI: Material-UI Dialog with WarningIcon\n   - Buttons: Cancel (outlined), Confirm (contained, error color)\n   - Disable buttons during loading\n   - Show CircularProgress on Confirm button when loading\n   - Default title: \"Confirm Action\"\n   - Default message: \"Are you sure you want to proceed?\"\n   - Use DialogTitle, DialogContent, DialogActions\n\n7. StatsCard (client/src/components/shared/StatsCard.tsx)\n   - Dashboard metric card\n   - Props: title (string), value (string | number), icon (ReactNode from @mui/icons-material), color (optional, default 'primary'), trend (optional: { value: number, direction: 'up' | 'down' })\n   - UI: Card with icon, title, large value text, optional trend indicator\n   - Icon in circular Avatar with specified color background\n   - Trend: small text with TrendingUpIcon (green) or TrendingDownIcon (red) and percentage\n   - Example usage: \u003cStatsCard title=\"Total Properties\" value={12} icon={\u003cHomeIcon /\u003e} /\u003e\n   - Responsive sizing: min-height 120px\n\n8. DateRangePicker (client/src/components/shared/DateRangePicker.tsx)\n   - Date range selection for filtering\n   - Props: startDate (Date | null), endDate (Date | null), onStartDateChange, onEndDateChange, label (optional)\n   - UI: Two DatePicker components side by side (From/To labels)\n   - Use @mui/x-date-pickers DatePicker with LocalizationProvider\n   - Provider: AdapterDateFns from @mui/x-date-pickers/AdapterDateFns\n   - Validation: startDate \u003c= endDate (show error helper text if invalid)\n   - Clear button (IconButton with ClearIcon) to reset both dates to null\n   - Responsive: stack vertically on mobile (use Stack component with direction={{ xs: 'column', sm: 'row' }})\n   - Date format: 'dd/MM/yyyy' (UK format)\n\n9. PropertySelector (client/src/components/shared/PropertySelector.tsx)\n   - Dropdown for filtering by property\n   - Props: value (propertyId string or 'all'), onChange (callback), includeAllOption (default true)\n   - Fetch properties list using API client getProperties() in useEffect\n   - UI: Material-UI Select or Autocomplete component\n   - Options: \"All Properties\" (value: 'all') as first option, then properties with label format: \"PropertyName - Street, Postcode\"\n   - Empty state if no properties: show \"No properties available\"\n   - Loading state while fetching: show CircularProgress or skeleton\n   - Use FormControl and InputLabel for proper Material-UI styling\n   - Sort properties by name alphabetically\n\nSHARED TYPES:\nCreate client/src/types/component.types.ts for component-specific prop types that don't come from API\n\nSTYLING:\n- Use Material-UI sx prop for styling\n- Follow theme colors and spacing (theme.spacing(), theme.palette)\n- Ensure responsive design (mobile-first, use theme.breakpoints)\n- Consistent spacing and sizing across components\n- Card elevation: 2 for cards, hover elevation: 4\n\nERROR HANDLING:\n- Graceful handling of missing data (show fallback text or skeleton)\n- PropTypes or TypeScript validation (strict TypeScript interfaces)\n- Console warnings for development (use import.meta.env.DEV)\n- Handle API fetch errors in PropertyCard and TenantCard (show error state or fallback)\n\nPERFORMANCE:\n- Use React.memo for components that receive frequent prop updates\n- Debounce API calls if needed (for PropertySelector search)\n- Cleanup useEffect subscriptions (AbortController for fetch requests)\n\nEXPORT:\nExport all components from index file: client/src/components/shared/index.ts\n```typescript\nexport { PropertyCard } from './PropertyCard';\nexport { TenantCard } from './TenantCard';\n// ... etc\n```\n\nEach component should be a standalone, reusable module that can be imported and used across different pages.","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:20.093012264Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T17:50:58.971926411Z","dependencies":[{"issue_id":"Task-85a","depends_on_id":"Task-atm","type":"blocks","created_at":"2026-01-13T11:16:12.191570595Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-98e","title":"Create deployment documentation including local network setup instructions, environment variable configuration, database backup procedures, and systemd service file for Linux deployment","status":"open","priority":3,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:19.948810254Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:19.948810254Z","dependencies":[{"issue_id":"Task-98e","depends_on_id":"Task-1t8","type":"blocks","created_at":"2026-01-13T11:16:57.58050151Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-atm","title":"React frontend foundation with React Router setup, Material-UI theme configuration, authentication context, and main layout component with navigation","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:00.790614157Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T15:34:15.495980353Z","closed_at":"2026-01-13T15:34:15.495980353Z","close_reason":"Closed","dependencies":[{"issue_id":"Task-atm","depends_on_id":"Task-tmr","type":"blocks","created_at":"2026-01-13T11:15:10.992290981Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-b30","title":"Authentication system with sessions","description":"## Overview\nImplement complete authentication system with bcrypt password hashing, express-session with SQLite store, and middleware for protecting routes.\n\n## Files\n- Create: `server/src/middleware/auth.ts`\n- Create: `server/src/routes/auth.ts`\n- Create: `server/src/services/auth.service.ts`\n- Create: `shared/types/auth.types.ts`\n- Modify: `server/src/server.ts` (add session and auth routes)\n\n## Implementation Steps\n\n### Step 1: Create shared auth types\n\n`shared/types/auth.types.ts`:\n```typescript\nexport interface LoginRequest {\n  email: string;\n  password: string;\n}\n\nexport interface User {\n  id: string;\n  email: string;\n}\n\nexport interface AuthResponse {\n  success: boolean;\n  user?: User;\n  error?: string;\n}\n\ndeclare module 'express-session' {\n  interface SessionData {\n    userId: string;\n  }\n}\n```\n\n### Step 2: Create auth service\n\n`server/src/services/auth.service.ts`:\n```typescript\nimport bcrypt from 'bcrypt';\nimport prisma from '../db/client';\nimport { User } from '../../shared/types/auth.types';\n\nconst SALT_ROUNDS = 10;\n\nexport class AuthService {\n  async createUser(email: string, password: string): Promise\u003cUser\u003e {\n    const hashedPassword = await bcrypt.hash(password, SALT_ROUNDS);\n    \n    const user = await prisma.user.create({\n      data: {\n        email,\n        password: hashedPassword,\n      },\n    });\n\n    return {\n      id: user.id,\n      email: user.email,\n    };\n  }\n\n  async validateCredentials(email: string, password: string): Promise\u003cUser | null\u003e {\n    const user = await prisma.user.findUnique({\n      where: { email },\n    });\n\n    if (!user) {\n      return null;\n    }\n\n    const isValid = await bcrypt.compare(password, user.password);\n    if (!isValid) {\n      return null;\n    }\n\n    return {\n      id: user.id,\n      email: user.email,\n    };\n  }\n\n  async getUserById(id: string): Promise\u003cUser | null\u003e {\n    const user = await prisma.user.findUnique({\n      where: { id },\n    });\n\n    if (!user) {\n      return null;\n    }\n\n    return {\n      id: user.id,\n      email: user.email,\n    };\n  }\n}\n\nexport default new AuthService();\n```\n\n### Step 3: Create auth middleware\n\n`server/src/middleware/auth.ts`:\n```typescript\nimport { Request, Response, NextFunction } from 'express';\n\nexport function requireAuth(req: Request, res: Response, next: NextFunction) {\n  if (!req.session.userId) {\n    return res.status(401).json({\n      success: false,\n      error: { code: 'UNAUTHORIZED', message: 'Authentication required' },\n    });\n  }\n  next();\n}\n```\n\n### Step 4: Create auth routes\n\n`server/src/routes/auth.ts`:\n```typescript\nimport { Router } from 'express';\nimport authService from '../services/auth.service';\nimport { LoginRequest, AuthResponse } from '../../shared/types/auth.types';\n\nconst router = Router();\n\nrouter.post('/login', async (req, res) =\u003e {\n  try {\n    const { email, password } = req.body as LoginRequest;\n\n    if (!email || !password) {\n      return res.status(400).json({\n        success: false,\n        error: { code: 'VALIDATION_ERROR', message: 'Email and password required' },\n      });\n    }\n\n    const user = await authService.validateCredentials(email, password);\n\n    if (!user) {\n      return res.status(401).json({\n        success: false,\n        error: { code: 'INVALID_CREDENTIALS', message: 'Invalid email or password' },\n      });\n    }\n\n    req.session.userId = user.id;\n\n    res.json({\n      success: true,\n      data: { user },\n    });\n  } catch (error) {\n    console.error('Login error:', error);\n    res.status(500).json({\n      success: false,\n      error: { code: 'SERVER_ERROR', message: 'An error occurred during login' },\n    });\n  }\n});\n\nrouter.post('/logout', (req, res) =\u003e {\n  req.session.destroy((err) =\u003e {\n    if (err) {\n      return res.status(500).json({\n        success: false,\n        error: { code: 'SERVER_ERROR', message: 'Could not log out' },\n      });\n    }\n    res.json({ success: true });\n  });\n});\n\nrouter.get('/me', async (req, res) =\u003e {\n  if (!req.session.userId) {\n    return res.status(401).json({\n      success: false,\n      error: { code: 'UNAUTHORIZED', message: 'Not authenticated' },\n    });\n  }\n\n  try {\n    const user = await authService.getUserById(req.session.userId);\n    if (!user) {\n      req.session.destroy(() =\u003e {});\n      return res.status(401).json({\n        success: false,\n        error: { code: 'USER_NOT_FOUND', message: 'User no longer exists' },\n      });\n    }\n\n    res.json({\n      success: true,\n      data: { user },\n    });\n  } catch (error) {\n    console.error('Get user error:', error);\n    res.status(500).json({\n      success: false,\n      error: { code: 'SERVER_ERROR', message: 'Could not retrieve user' },\n    });\n  }\n});\n\nexport default router;\n```\n\n### Step 5: Update server.ts with session\n\nModify `server/src/server.ts`:\n```typescript\nimport express from 'express';\nimport session from 'express-session';\nimport helmet from 'helmet';\nimport rateLimit from 'express-rate-limit';\nimport createSqliteStore from 'better-sqlite3-session-store';\nimport Database from 'better-sqlite3';\nimport path from 'path';\nimport authRoutes from './routes/auth';\n\nconst app = express();\nconst PORT = process.env.PORT || 3000;\n\n// Session store\nconst SqliteStore = createSqliteStore(session);\nconst db = new Database(path.join(__dirname, '../../data/sessions.db'));\n\n// Security middleware\napp.use(helmet());\napp.use(rateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: 100\n}));\n\n// Body parsing\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\n// Session configuration\napp.use(session({\n  store: new SqliteStore({\n    client: db,\n    expired: {\n      clear: true,\n      intervalMs: 900000 // 15 minutes\n    }\n  }),\n  secret: process.env.SESSION_SECRET || 'your-secret-key-change-this',\n  resave: false,\n  saveUninitialized: false,\n  cookie: {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'strict',\n    maxAge: 24 * 60 * 60 * 1000 // 24 hours\n  }\n}));\n\n// Routes\napp.use('/api/auth', authRoutes);\n\n// Health check\napp.get('/api/health', (req, res) =\u003e {\n  res.json({ status: 'ok', timestamp: new Date().toISOString() });\n});\n\n// Start server\napp.listen(PORT, () =\u003e {\n  console.log(`Server running on port ${PORT}`);\n});\n\nexport default app;\n```\n\n### Step 6: Create initial user\n\nCreate `server/src/scripts/create-user.ts`:\n```typescript\nimport authService from '../services/auth.service';\n\nasync function createUser() {\n  const email = process.argv[2] || 'admin@example.com';\n  const password = process.argv[3] || 'admin123';\n\n  try {\n    const user = await authService.createUser(email, password);\n    console.log('✅ User created successfully:', user);\n  } catch (error: any) {\n    if (error.code === 'P2002') {\n      console.error('❌ User already exists with this email');\n    } else {\n      console.error('❌ Error creating user:', error);\n    }\n  }\n  process.exit(0);\n}\n\ncreateUser();\n```\n\nRun:\n```bash\ntsx server/src/scripts/create-user.ts admin@example.com password123\n```\n\nExpected: \"✅ User created successfully\"\n\n### Step 7: Test authentication\n\n```bash\n# Test login\ncurl -X POST http://localhost:3000/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"admin@example.com\",\"password\":\"password123\"}' \\\n  -c cookies.txt\n\n# Test /me endpoint\ncurl http://localhost:3000/api/auth/me -b cookies.txt\n\n# Test logout\ncurl -X POST http://localhost:3000/api/auth/logout -b cookies.txt\n```\n\nExpected: Login returns user object, /me returns user, logout succeeds\n\n### Step 8: Commit\n\n```bash\ngit add server/src/middleware/ server/src/routes/auth.ts server/src/services/auth.service.ts shared/types/auth.types.ts server/src/server.ts server/src/scripts/\ngit commit -m \"feat: add authentication system with sessions\"\n```\n\n## Verification\n\n- [ ] User can be created via script\n- [ ] Login with correct credentials returns user object and sets session\n- [ ] Login with incorrect credentials returns 401 error\n- [ ] /me endpoint returns user when authenticated\n- [ ] /me endpoint returns 401 when not authenticated\n- [ ] Logout destroys session\n- [ ] Sessions persist across server restarts (SQLite store)\n- [ ] Session cookies are httpOnly and secure in production\n\n## Notes\n\n- Password is hashed with bcrypt (10 rounds)\n- Sessions stored in SQLite for persistence\n- Session max age is 24 hours\n- Cookie security settings depend on NODE_ENV\n- Create at least one user before testing frontend","status":"closed","priority":1,"issue_type":"feature","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:47:38.501139423Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T13:39:41.280549673Z","closed_at":"2026-01-13T13:39:41.280549673Z","close_reason":"Authentication system implemented with bcrypt password hashing, SQLite-backed sessions, comprehensive tests (13/13 passing), and secure cookie configuration. Spec compliant and code quality approved.","dependencies":[{"issue_id":"Task-b30","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:24.086715562Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-b6b","title":"Financial reporting features including income statement (P\u0026L), category breakdown with charts, property performance metrics, and CSV export functionality. Use recharts or similar for visualizations.","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:20.496497572Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:20.496497572Z","dependencies":[{"issue_id":"Task-b6b","depends_on_id":"Task-0in","type":"blocks","created_at":"2026-01-13T11:16:50.354431717Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-b6b","depends_on_id":"Task-4q5","type":"blocks","created_at":"2026-01-13T11:16:50.839713084Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-bhk","title":"Login page component with React Hook Form, Zod validation, Material-UI styling, and integration with auth context. Include protected route wrapper.","description":"Refactor the existing Login page to use React Hook Form with Zod validation, replacing the current basic state management implementation.\n\nDEPENDENCIES INSTALLATION:\nRun in client/ directory first:\nnpm install react-hook-form @hookform/resolvers zod\n\nFILE LOCATION:\n- client/src/pages/Login.tsx (modify existing file)\n\nCURRENT STATE:\n- Basic implementation using useState for form fields\n- Direct fetch calls to API\n- Basic validation (required fields only)\n\nTARGET IMPLEMENTATION:\n\n1. FORM MANAGEMENT:\n   - Replace useState with React Hook Form's useForm hook\n   - Use zodResolver to integrate Zod validation\n   - Fields: email (email validation), password (min 8 chars)\n   - Form submission handling with proper error states\n\n2. VALIDATION SCHEMA:\n   Create client/src/validation/auth.validation.ts:\n   ```typescript\n   import { z } from 'zod';\n   \n   export const LoginFormSchema = z.object({\n     email: z.string().email('Invalid email address'),\n     password: z.string().min(8, 'Password must be at least 8 characters'),\n   });\n   \n   export type LoginFormData = z.infer\u003ctypeof LoginFormSchema\u003e;\n   ```\n\n3. COMPONENT STRUCTURE:\n   - Import useForm from 'react-hook-form' and zodResolver from '@hookform/resolvers/zod'\n   - Initialize form with zodResolver(LoginFormSchema)\n   - Use Controller or register() for form fields\n   - Display field-level errors using form.formState.errors\n   - Show API errors separately in Alert component\n   - Disable submit button during loading and when form is invalid\n\n4. MATERIAL-UI INTEGRATION:\n   - TextField components should display validation errors\n   - Use error and helperText props to show field errors\n   - Maintain existing styling and layout\n   - Keep Paper, Container, Box structure\n\n5. AUTHENTICATION:\n   - Keep existing useAuth hook integration\n   - Handle login success/failure\n   - Navigate to /dashboard on success\n   - Show error messages in Alert on failure\n\n6. LOADING STATES:\n   - Disable form during submission\n   - Update button text: \"Sign In\" → \"Signing in...\"\n   - Prevent multiple submissions\n\nTESTING:\n- Test email validation (invalid format)\n- Test password length validation\n- Test successful login flow\n- Test error display for invalid credentials\n- Test loading states\n\nThe ProtectedRoute wrapper already exists and works correctly - no changes needed there.","status":"open","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:00.984830128Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T17:50:09.02423229Z","dependencies":[{"issue_id":"Task-bhk","depends_on_id":"Task-atm","type":"blocks","created_at":"2026-01-13T11:16:10.068235478Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-bhk","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:16:10.584370299Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-d3h","title":"Implement Tenants CRUD API with endpoints for create, read, update, delete, and list operations. Add filtering by tenant status (prospective/active/former). Implement Zod validation schemas for all tenant data including personal info, contact details, and lease associations. Create endpoint for retrieving tenant lease history with property details and date ranges. Include error handling and proper HTTP status codes.","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:47:40.374164515Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T15:21:36.14216717Z","closed_at":"2026-01-13T15:21:36.14216717Z","close_reason":"Closed","dependencies":[{"issue_id":"Task-d3h","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:46.90271994Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-d3h","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:15:47.391076931Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-d3h","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:15:47.873343195Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-mdy","title":"Calendar/Events Page with react-big-calendar","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:19.537389851Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:19.537389851Z","dependencies":[{"issue_id":"Task-mdy","depends_on_id":"Task-1ks","type":"blocks","created_at":"2026-01-13T11:16:37.586911825Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-mdy","depends_on_id":"Task-85a","type":"blocks","created_at":"2026-01-13T11:16:38.116722946Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-mdy","depends_on_id":"Task-0ur","type":"blocks","created_at":"2026-01-13T11:16:38.633836981Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-mdy","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:16:39.166914891Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-ob7","title":"Documents/File Upload API with Multer","status":"closed","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:09.356011401Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T15:48:11.837721175Z","closed_at":"2026-01-13T15:48:11.837721175Z","close_reason":"Closed","dependencies":[{"issue_id":"Task-ob7","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:55.441424751Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-ob7","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:15:55.992187813Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-ob7","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:15:56.508556765Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-ob7","depends_on_id":"Task-4fz","type":"blocks","created_at":"2026-01-13T11:15:57.060524581Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-pmy","title":"Properties List/Detail Page with CRUD Operations","description":"Create a comprehensive Properties page component with the following features:\n\n**List View:**\n- Material-UI DataGrid or Card-based layout for displaying all properties\n- Search functionality (filter by name, address, postcode)\n- Filter by property status (vacant, on_market, rented, maintenance, other)\n- Filter by property type (house, apartment, condo, commercial, other)\n- Status badges with appropriate colors\n- Sort by name, purchase date, status\n- Click on property card/row to navigate to detail view\n- \"Add Property\" button to create new property\n\n**Property Cards (if using card layout):**\n- Property name and address\n- Status badge with color coding\n- Property type\n- Quick stats (current tenant, monthly rent if applicable)\n- Edit and Delete action buttons\n\n**Create/Edit Property Form:**\n- React Hook Form with Zod validation\n- Fields: name, address (street, city, county, postcode), property_type, purchase_date, purchase_price, status, notes\n- UK postcode validation\n- Material-UI form components\n- Save and Cancel buttons\n- Modal or slide-out drawer for form\n\n**Property Detail View:**\n- Property information section with edit capability\n- Tabs for different sections:\n  1. Overview: Full property details, map/location (if possible), notes\n  2. Leases: Current and past leases with tenant information\n     - Show lease dates, monthly rent, security deposit\n     - Click to view tenant details\n     - \"Add Lease\" button\n  3. Transactions: Financial history for this property\n     - Filterable transaction list (income/expense, category, date range)\n     - Summary stats (total income, total expenses, net)\n     - Click to view/edit transaction\n     - \"Add Transaction\" button\n  4. Events: Scheduled and completed events for this property\n     - Calendar or list view\n     - Filter by event type and completion status\n     - Click to view/edit event\n     - \"Schedule Event\" button\n\n**CRUD Operations:**\n- GET /api/properties - Fetch all properties\n- GET /api/properties/:id - Fetch single property with related data\n- POST /api/properties - Create new property\n- PUT /api/properties/:id - Update property\n- DELETE /api/properties/:id - Delete property (with confirmation dialog)\n\n**API Integration:**\n- Use Axios for API calls\n- Create API service functions in /client/src/services/propertiesService.ts\n- Handle loading states, error states, and success notifications\n- Use Material-UI Snackbar for toast notifications\n\n**State Management:**\n- React hooks (useState, useEffect) for local state\n- Consider React Query or SWR for data fetching and caching (optional)\n\n**Responsive Design:**\n- Mobile-friendly layout\n- Collapsible sidebar navigation\n- Touch-friendly buttons and forms\n\n**File Location:**\n- /client/src/pages/Properties.tsx - Main properties page\n- /client/src/components/PropertyCard.tsx - Property card component\n- /client/src/components/PropertyForm.tsx - Create/Edit form\n- /client/src/components/PropertyDetail.tsx - Detail view component\n- /client/src/services/propertiesService.ts - API service functions\n\n**Dependencies:**\n- @mui/material\n- @mui/x-data-grid (if using DataGrid)\n- react-hook-form\n- zod\n- axios\n- react-router-dom\n\n**Testing:**\n- Test CRUD operations with existing Properties API\n- Verify validation works correctly\n- Test filtering and search functionality\n- Ensure responsive layout on mobile devices\n\n**Notes:**\n- Reuse shared components where possible (ConfirmDialog, DateRangePicker, PropertySelector)\n- Follow Material-UI design patterns\n- Ensure accessibility (ARIA labels, keyboard navigation)\n- Display related data (leases, transactions, events) from their respective APIs\n- Implement proper error handling and user feedback","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:54.621626267Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:54.621626267Z","dependencies":[{"issue_id":"Task-pmy","depends_on_id":"Task-1ks","type":"blocks","created_at":"2026-01-13T11:16:29.404106804Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-pmy","depends_on_id":"Task-85a","type":"blocks","created_at":"2026-01-13T11:16:29.959366016Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-pmy","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:16:30.484521975Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-pmy","depends_on_id":"Task-srp","type":"blocks","created_at":"2026-01-13T11:16:31.054887989Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-pmy","depends_on_id":"Task-4q5","type":"blocks","created_at":"2026-01-13T11:16:31.592749955Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-pmy","depends_on_id":"Task-0ur","type":"blocks","created_at":"2026-01-13T11:16:32.143525087Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-srp","title":"Leases CRUD API with endpoints, filtering by property and status, validation, and relationship management with tenants and properties","description":"Implement Leases CRUD API following the established patterns from Properties and Tenants APIs.\n\nFILE LOCATION:\n- server/src/routes/leases.ts (create new file)\n\nENDPOINTS TO IMPLEMENT:\n\n1. GET /api/leases\n   - Query parameters: property_id (optional), tenant_id (optional), status (optional: Draft, Active, Expired, Terminated)\n   - Validate query params using LeaseQueryParamsSchema (create in lease.validation.ts)\n   - Return filtered list of leases with property and tenant relationships included\n   - Order by startDate desc\n   - Response: { success: true, leases: Lease[] }\n\n2. GET /api/leases/:id\n   - Validate UUID format\n   - Include property and tenant relations in response\n   - Return 404 if not found\n   - Response: { success: true, lease: Lease }\n\n3. POST /api/leases (requires auth)\n   - Validate with CreateLeaseSchema\n   - Business logic validations:\n     * Check property exists and is not deleted\n     * Check tenant exists and is not Former status\n     * Validate no overlapping ACTIVE leases for the same property (only check Active status, not Draft/Expired/Terminated)\n     * Overlap check: new lease's date range overlaps if (startDate \u003c= existing.endDate OR existing.endDate is null) AND (endDate \u003e= existing.startDate OR new endDate is null)\n   - Create lease in database\n   - Return 201 status\n   - Response: { success: true, lease: Lease }\n\n4. PUT /api/leases/:id (requires auth)\n   - Validate UUID format and UpdateLeaseSchema\n   - Check lease exists\n   - If property or tenant changed, validate they exist\n   - If dates changed, validate no overlapping ACTIVE leases (exclude current lease from overlap check)\n   - Update lease\n   - Response: { success: true, lease: Lease }\n\n5. DELETE /api/leases/:id (requires auth)\n   - Validate UUID format\n   - Check lease exists\n   - Soft delete: set status to 'Terminated'\n   - Response: { success: true, lease: Lease }\n\nVALIDATION SCHEMA TO CREATE:\nAdd to shared/validation/lease.validation.ts:\n- LeaseQueryParamsSchema with optional property_id (uuid), tenant_id (uuid), and status (LeaseStatusSchema enum) filters\n\nPATTERNS TO FOLLOW:\n- Use requireAuth middleware from '../middleware/auth.js'\n- Import prisma from '../db/client.js'\n- Import schemas from '../../../shared/validation/lease.validation.js'\n- Standard error responses with 400/404/500 status codes\n- Use z.string().uuid() for ID validation\n- Include try-catch blocks with console.error logging\n- Use prisma includes: { property: true, tenant: true }\n\nERROR HANDLING:\n- 400: Validation errors (invalid input, date conflicts, overlapping leases with clear message \"Cannot create lease: overlapping active lease exists for this property\")\n- 404: Lease/property/tenant not found\n- 500: Server errors\n\nTESTS:\nCreate server/src/routes/__tests__/leases.test.ts following patterns from properties.test.ts and tenants.test.ts with test cases for:\n- List leases with filters (by property, tenant, status)\n- Get single lease with relations\n- Create lease with validation\n- Prevent overlapping ACTIVE leases (should fail)\n- Allow Draft/Expired leases on same property (should succeed)\n- Update lease\n- Delete (soft delete to Terminated)\n- Error cases (not found, invalid IDs, unauthorized, Former tenant)\n\nREGISTRATION:\nAdd to server/src/server.ts:\nimport leasesRoutes from './routes/leases.js';\napp.use('/api/leases', leasesRoutes);","status":"in_progress","priority":1,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:47:38.965701308Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T17:53:07.847176061Z","dependencies":[{"issue_id":"Task-srp","depends_on_id":"Task-221","type":"blocks","created_at":"2026-01-13T11:15:48.383187419Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-srp","depends_on_id":"Task-0m9","type":"blocks","created_at":"2026-01-13T11:15:48.87967505Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-srp","depends_on_id":"Task-b30","type":"blocks","created_at":"2026-01-13T11:15:49.377964275Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-srp","depends_on_id":"Task-4l5","type":"blocks","created_at":"2026-01-13T11:15:49.87140135Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-srp","depends_on_id":"Task-d3h","type":"blocks","created_at":"2026-01-13T11:15:50.362280751Z","created_by":"Alexander Pezarro"}]}
{"id":"Task-tmr","title":"Project setup \u0026 tooling configuration","description":"## Overview\nInitialize the landlord management system project structure with TypeScript, Node.js backend, React frontend, and development tooling.\n\n## Files\n- Create: `package.json`\n- Create: `tsconfig.json`\n- Create: `server/tsconfig.json`\n- Create: `client/tsconfig.json`\n- Create: `server/src/server.ts`\n- Create: `client/src/main.tsx`\n- Create: `client/src/App.tsx`\n- Create: `client/vite.config.ts`\n- Create: `client/index.html`\n- Create: `.gitignore`\n- Create: `.env.example`\n\n## Implementation Steps\n\n### Step 1: Initialize project\n\n```bash\n# Create project structure\nmkdir -p server/src/{routes,services,middleware,utils}\nmkdir -p client/src/{components,pages,hooks,services,types}\nmkdir -p shared/{types,validation}\nmkdir -p data uploads docs prisma\n```\n\n### Step 2: Create root package.json with all dependencies\n\n### Step 3: Create client package.json\n\n### Step 4: Create TypeScript configs for root, server, and client\n\n### Step 5: Create Vite config with proxy to backend\n\n### Step 6: Create basic server entry with Express, helmet, rate limiting\n\n### Step 7: Create basic React app with health check\n\n### Step 8: Create .gitignore and .env.example\n\n### Step 9: Install dependencies and test\n\n```bash\nnpm install\ncd client \u0026\u0026 npm install \u0026\u0026 cd ..\nnpm run dev\n```\n\nExpected: Both servers start successfully. Visit http://localhost:5173 and see \"Server status: ok\"\n\n### Step 10: Commit\n\n```bash\ngit add .\ngit commit -m \"feat: initial project setup with TypeScript, Express, and React\"\n```\n\n## Verification\n\n- [ ] `npm run dev` starts both backend (port 3000) and frontend (port 5173)\n- [ ] Frontend displays \"Server status: ok\"\n- [ ] `curl http://localhost:3000/api/health` returns JSON with status \"ok\"\n- [ ] TypeScript compiles without errors\n- [ ] All directories exist as per project structure\n\n## Notes\n\n- This is the foundation bead that all others depend on\n- The proxy configuration in Vite allows frontend to call `/api` endpoints\n- Rate limiting is set conservatively (100 requests per 15 minutes)\n- Session secret should be changed in production","status":"closed","priority":0,"issue_type":"feature","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:52:04.491817986Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T12:29:06.523788612Z","closed_at":"2026-01-13T12:29:06.523788612Z","close_reason":"Project setup complete. All verification requirements passed. Code quality: Approved with reservations - production concerns (CORS, graceful shutdown, session store, error handling) should be addressed in future beads before deployment."}
{"id":"Task-vpz","title":"Global error handling with React error boundary, toast notifications using Material-UI Snackbar, loading states, and standardized error response handling in API client","status":"open","priority":2,"issue_type":"task","owner":"alexanderpezarro@gmail.com","created_at":"2026-01-13T10:48:19.94502315Z","created_by":"Alexander Pezarro","updated_at":"2026-01-13T10:48:19.94502315Z","dependencies":[{"issue_id":"Task-vpz","depends_on_id":"Task-atm","type":"blocks","created_at":"2026-01-13T11:16:12.724604229Z","created_by":"Alexander Pezarro"},{"issue_id":"Task-vpz","depends_on_id":"Task-1ks","type":"blocks","created_at":"2026-01-13T11:16:13.276350335Z","created_by":"Alexander Pezarro"}]}
